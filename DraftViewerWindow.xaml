<Window x:Class="TimeTask.DraftViewerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2006"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:TimeTask"
        mc:Ignorable="d"
        Title="任务草稿" Height="500" Width="700"
        WindowStartupLocation="CenterOwner">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 标题栏 -->
        <Border Background="#FF3B5998" Grid.Row="0">
            <StackPanel Margin="15,10" Orientation="Horizontal">
                <TextBlock Text="📋 " FontSize="20"/>
                <TextBlock Text="任务草稿" FontSize="18" FontWeight="Bold" Foreground="White"/>
                <TextBlock x:Name="DraftCountText" Margin="15,0,0,0" FontSize="14" Foreground="White" VerticalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- 说明文字 -->
        <TextBlock Grid.Row="1" Margin="15,10" TextWrapping="Wrap" Foreground="Gray">
            这些是系统通过监听您的语音自动识别的潜在任务。点击"添加到任务"将任务添加到对应的四象限，或点击"忽略"删除草稿。
        </TextBlock>

        <!-- 草稿列表 -->
        <DataGrid x:Name="DraftsDataGrid" Grid.Row="1" Margin="15,0,15,10"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  SelectionMode="Extended"
                  SelectionUnit="FullRow"
                  RowHeight="60">
            <DataGrid.Columns>
                <DataGridTextColumn Header="检测时间" Width="120" Binding="{Binding LastDetected, StringFormat='HH:mm:ss'}"/>
                <DataGridTextColumn Header="任务描述" Width="*" Binding="{Binding CleanedText}"/>
                <DataGridTextColumn Header="象限" Width="100" Binding="{Binding EstimatedQuadrant}"/>
                <DataGridTextColumn Header="优先级" Width="80" Binding="{Binding Importance}"/>
                <DataGridTextColumn Header="检测次数" Width="80" Binding="{Binding DetectionCount}"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- 按钮栏 -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="15">
            <Button x:Name="AddToTaskButton" Content="添加选中" Width="100" Height="35" Margin="0,0,10,0" Click="AddToTaskButton_Click"/>
            <Button x:Name="AddAllButton" Content="一键添加全部" Width="120" Height="35" Margin="0,0,10,0" Click="AddAllButton_Click"/>
            <Button x:Name="IgnoreButton" Content="忽略" Width="80" Height="35" Margin="0,0,10,0" Click="IgnoreButton_Click"/>
            <Button x:Name="ClearAllButton" Content="清空所有" Width="80" Height="35" Margin="0,0,10,0" Click="ClearAllButton_Click"/>
            <Button x:Name="CloseButton" Content="关闭" Width="80" Height="35" Click="CloseButton_Click"/>
        </StackPanel>
    </Grid>
</Window>
