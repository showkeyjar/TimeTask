<UserControl x:Class="TimeTask.KanbanBoardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:TimeTask"
             xmlns:timetask="clr-namespace:TimeTask"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="800"
             DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <UserControl.Resources>
        <DataTemplate x:Key="KanbanTaskCardTemplate" DataType="{x:Type timetask:ItemGrid}">
            <Border BorderBrush="DarkGray" BorderThickness="1" Margin="2" Padding="5" MinHeight="60" Background="LightYellow"
                    PreviewMouseLeftButtonDown="TaskCard_PreviewMouseLeftButtonDown">
                <StackPanel>
                    <TextBlock Text="{Binding Task}" FontWeight="Bold" TextWrapping="Wrap"/>
                    <TextBlock Text="{Binding Importance, StringFormat='Importance: {0}'}" FontSize="10"/>
                    <TextBlock Text="{Binding Urgency, StringFormat='Urgency: {0}'}" FontSize="10"/>
                </StackPanel>
            </Border>
        </DataTemplate>
    </UserControl.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Backlog Column -->
        <Border Grid.Column="0" BorderBrush="Black" BorderThickness="1" Margin="5" Background="LightBlue"
                x:Name="BacklogColumnBorder" AllowDrop="True" DragEnter="Column_DragEnter" DragOver="Column_DragOver" Drop="Column_Drop" Tag="Backlog">
            <DockPanel>
                <TextBlock Text="Backlog" DockPanel.Dock="Top" FontWeight="Bold" HorizontalAlignment="Center" Margin="5"/>
                <ItemsControl x:Name="BacklogItemsControl" Margin="5" ItemsSource="{Binding BacklogTasks}" ItemTemplate="{StaticResource KanbanTaskCardTemplate}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Vertical"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </DockPanel>
        </Border>

        <!-- To Do Column -->
        <Border Grid.Column="1" BorderBrush="Black" BorderThickness="1" Margin="5" Background="LightCoral"
                x:Name="ToDoColumnBorder" AllowDrop="True" DragEnter="Column_DragEnter" DragOver="Column_DragOver" Drop="Column_Drop" Tag="To Do">
            <DockPanel>
                <TextBlock x:Name="ToDoColumnHeader" Text="To Do" DockPanel.Dock="Top" FontWeight="Bold" HorizontalAlignment="Center" Margin="5" Background="LightGray"/>
                <ItemsControl x:Name="ToDoItemsControl" Margin="5" ItemsSource="{Binding ToDoTasks}" ItemTemplate="{StaticResource KanbanTaskCardTemplate}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Vertical"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </DockPanel>
        </Border>

        <!-- In Progress Column -->
        <Border Grid.Column="2" BorderBrush="Black" BorderThickness="1" Margin="5" Background="LightGoldenrodYellow"
                x:Name="InProgressColumnBorder" AllowDrop="True" DragEnter="Column_DragEnter" DragOver="Column_DragOver" Drop="Column_Drop" Tag="In Progress">
            <DockPanel>
                <TextBlock x:Name="InProgressColumnHeader" Text="In Progress" DockPanel.Dock="Top" FontWeight="Bold" HorizontalAlignment="Center" Margin="5" Background="LightGray"/>
                <ItemsControl x:Name="InProgressItemsControl" Margin="5" ItemsSource="{Binding InProgressTasks}" ItemTemplate="{StaticResource KanbanTaskCardTemplate}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Vertical"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </DockPanel>
        </Border>

        <!-- Done Column -->
        <Border Grid.Column="3" BorderBrush="Black" BorderThickness="1" Margin="5" Background="LightGreen"
                x:Name="DoneColumnBorder" AllowDrop="True" DragEnter="Column_DragEnter" DragOver="Column_DragOver" Drop="Column_Drop" Tag="Done">
            <DockPanel>
                <TextBlock Text="Done" DockPanel.Dock="Top" FontWeight="Bold" HorizontalAlignment="Center" Margin="5"/>
                <ItemsControl x:Name="DoneItemsControl" Margin="5" ItemsSource="{Binding DoneTasks}" ItemTemplate="{StaticResource KanbanTaskCardTemplate}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Vertical"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </DockPanel>
        </Border>
    </Grid>
</UserControl>
