<Window x:Class="TimeTask.ThinkingToolAnalysisWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:TimeTask"
        Title="{local:Loc Key=ThinkingAnalysis_WindowTitle}"
        Width="760"
        Height="620"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize">
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#F7FAFC" BorderBrush="#E2E8F0" BorderThickness="1" CornerRadius="8" Padding="10">
            <StackPanel>
                <TextBlock x:Name="TitleText" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                <TextBlock x:Name="TaskText" Margin="0,6,0,0" TextWrapping="Wrap" Foreground="#334155"/>
                <TextBlock x:Name="WhyText" Margin="0,6,0,0" TextWrapping="Wrap" Foreground="#334155"/>
            </StackPanel>
        </Border>

        <Grid Grid.Row="1" Margin="0,10,0,8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <GroupBox Header="{local:Loc Key=ThinkingAnalysis_GroupDiagnosis}" Margin="0,0,6,0">
                <StackPanel Margin="8">
                    <TextBlock x:Name="DiagnosticText" TextWrapping="Wrap" Margin="0,0,0,8"/>
                    <TextBlock x:Name="HypothesisText" TextWrapping="Wrap"/>
                </StackPanel>
            </GroupBox>
            <GroupBox Grid.Column="1" Header="{local:Loc Key=ThinkingAnalysis_GroupDecision}" Margin="6,0,0,0">
                <StackPanel Margin="8">
                    <TextBlock x:Name="DecisionRuleText" TextWrapping="Wrap" Margin="0,0,0,8"/>
                    <ItemsControl x:Name="RiskItems">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding}" TextWrapping="Wrap" Margin="0,0,0,4"/>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </GroupBox>
        </Grid>

        <GroupBox Grid.Row="2" Header="{local:Loc Key=ThinkingAnalysis_GroupActions}">
            <Grid Margin="8">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <DataGrid x:Name="ActionsGrid"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          CanUserDeleteRows="False"
                          HeadersVisibility="Column">
                    <DataGrid.Columns>
                        <DataGridCheckBoxColumn Header="{local:Loc Key=ThinkingAnalysis_ColumnSelected}" Width="50" Binding="{Binding Selected, Mode=TwoWay}"/>
                        <DataGridTextColumn Header="{local:Loc Key=ThinkingAnalysis_ColumnPriority}" Width="70" Binding="{Binding Priority}"/>
                        <DataGridTextColumn Header="{local:Loc Key=ThinkingAnalysis_ColumnAction}" Width="*" Binding="{Binding Text}"/>
                        <DataGridTextColumn Header="{local:Loc Key=ThinkingAnalysis_ColumnRationale}" Width="220" Binding="{Binding Rationale}"/>
                    </DataGrid.Columns>
                </DataGrid>
                <TextBlock Grid.Row="1" x:Name="ReviewPromptText" Margin="0,8,0,0" Foreground="#475569" TextWrapping="Wrap"/>
            </Grid>
        </GroupBox>

        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="{local:Loc Key=ThinkingAnalysis_ButtonCreateSelected}" Width="150" Height="32" Margin="0,0,8,0" Click="CreateSelected_Click"/>
            <Button Content="{local:Loc Key=ThinkingAnalysis_ButtonCreateFirst}" Width="130" Height="32" Margin="0,0,8,0" Click="CreateFirst_Click"/>
            <Button Content="{local:Loc Key=Button_Close}" Width="80" Height="32" Click="Close_Click"/>
        </StackPanel>
    </Grid>
</Window>
