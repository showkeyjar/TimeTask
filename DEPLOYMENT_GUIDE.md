# 任务提醒系统改进 - 部署指南

## 部署步骤

### 1. 备份现有数据
在部署新版本之前，请备份以下文件：
```
data/
├── 1.csv
├── 2.csv  
├── 3.csv
├── 4.csv
└── long_term_goals.csv
```

### 2. 编译新版本
1. 使用 Visual Studio 打开 `TimeTask.sln`
2. 确保所有新文件都已包含在项目中：
   - `TaskReminderWindow.xaml` 和 `TaskReminderWindow.xaml.cs`
   - `SmartQuadrantSelectorWindow.xaml` 和 `SmartQuadrantSelectorWindow.xaml.cs`
   - `ReminderSettingsWindow.xaml` 和 `ReminderSettingsWindow.xaml.cs`
3. 编译项目（Build → Build Solution）

### 3. 更新配置文件
新版本会自动创建缺失的配置项，但建议手动检查 `App.config` 确保包含：
```xml
<appSettings>
    <add key="OpenAIApiKey" value="YOUR_API_KEY" />
    <add key="LlmProvider" value="zhipu" />
    <add key="LlmApiBaseUrl" value="https://open.bigmodel.cn/api/paas/v4/" />
    <add key="LlmModelName" value="glm-4" />
</appSettings>
```

### 4. 首次运行
1. 启动应用程序
2. 点击设置按钮（⚙️）→ "⏰ 任务提醒设置"
3. 根据个人需求调整提醒参数
4. 保存设置

## 功能验证

### 1. 验证提醒系统
1. 创建一个测试任务
2. 手动修改CSV文件中的 `lastModifiedDate` 为2天前
3. 等待5分钟（默认检查间隔）
4. 应该收到任务提醒窗口

### 2. 验证任务分解
1. 在提醒窗口中点击"分解任务"
2. 确认AI能够分解任务
3. 验证智能象限选择器正常工作
4. 确认子任务被正确分配到不同象限

### 3. 验证设置功能
1. 打开提醒设置窗口
2. 修改各项参数
3. 保存并重启应用
4. 确认新设置生效

## 故障排除

### 问题1: 提醒不工作
**可能原因**: 
- 定时器未启动
- 设置参数错误

**解决方案**:
1. 检查控制台输出是否有错误信息
2. 重新配置提醒设置
3. 重启应用程序

### 问题2: AI功能不可用
**可能原因**:
- API密钥未配置或无效
- 网络连接问题

**解决方案**:
1. 检查 `App.config` 中的API配置
2. 测试网络连接
3. 验证API密钥有效性

### 问题3: 任务分解失败
**可能原因**:
- LLM服务响应异常
- 任务描述过于简单

**解决方案**:
1. 检查控制台日志
2. 尝试更详细的任务描述
3. 检查LLM服务配置

### 问题4: 设置无法保存
**可能原因**:
- 权限不足
- 配置文件损坏

**解决方案**:
1. 以管理员身份运行
2. 删除用户配置文件重新生成
3. 检查文件系统权限

## 性能优化建议

### 1. 调整检查间隔
- 对于轻度使用：设置为10-15分钟
- 对于重度使用：保持5分钟
- 对于性能敏感环境：设置为30分钟

### 2. 优化提醒频率
- 第一次提醒：1-2天（根据工作节奏）
- 第二次提醒：3-5天
- 最大提醒次数：3-5次

### 3. 数据库优化
如果使用团队同步功能：
- 定期清理已完成任务
- 优化数据库索引
- 调整同步间隔

## 升级路径

### 从v1.x升级
1. 备份现有数据
2. 安装新版本
3. 首次启动会自动迁移设置
4. 验证功能正常

### 未来版本升级
- 保持向后兼容性
- 自动迁移配置和数据
- 提供升级日志和说明

## 监控和维护

### 1. 日志监控
关注控制台输出中的：
- 错误信息
- 性能警告
- API调用失败

### 2. 定期维护
- 每月检查CSV文件大小
- 清理过期的已完成任务
- 更新API密钥（如需要）

### 3. 性能监控
- 观察内存使用情况
- 监控响应时间
- 检查定时器执行频率

## 技术支持

如遇到问题，请提供以下信息：
1. 错误描述和重现步骤
2. 控制台输出日志
3. 系统环境信息
4. 配置文件内容（隐藏敏感信息）

---

通过遵循本指南，您可以成功部署和使用改进的任务提醒系统。新系统提供了更智能、更友好的任务管理体验。